

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quick Start Guide &mdash; Data-parallel Control (dpctl) 0.7.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/target-highlight.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/doxyrest-pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/doxyrest-sphinx_rtd_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="dpctl Python API" href="../dpctl_pyapi.html" />
    <link rel="prev" title="Welcome to Data-parallel Control (dpctl)’s documentation!" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Data-parallel Control (dpctl)
          

          
          </a>

          
            
            
              <div class="version">
                0.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guides</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Start Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing-from-oneapi">Installing from oneAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-wheel-package-from-pypi">Install Wheel package from Pypi</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-from-source">Building from source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#building-using-oneapi-dpcpp">Building using oneAPI dpcpp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-using-custom-dpcpp">Building using custom dpcpp</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-dpctl">Using dpctl</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-examples-and-tests">Running examples and tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-examples">Running the examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-python-tests">Running the Python tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-c-api-shared-library">Building the C API shared library</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dpctl_pyapi.html">dpctl Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dpctl-capi/index.html">dpctl C API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Data-parallel Control (dpctl)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Quick Start Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/docfiles/user_guides/QuickStart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quick-start-guide">
<span id="id1"></span><h1>Quick Start Guide<a class="headerlink" href="#quick-start-guide" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#installing-from-oneapi" id="id3">Installing from oneAPI</a></p></li>
<li><p><a class="reference internal" href="#install-wheel-package-from-pypi" id="id4">Install Wheel package from Pypi</a></p></li>
<li><p><a class="reference internal" href="#building-from-source" id="id5">Building from source</a></p>
<ul>
<li><p><a class="reference internal" href="#building-using-oneapi-dpcpp" id="id6">Building using oneAPI dpcpp</a></p></li>
<li><p><a class="reference internal" href="#building-using-custom-dpcpp" id="id7">Building using custom dpcpp</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#using-dpctl" id="id8">Using dpctl</a></p></li>
<li><p><a class="reference internal" href="#running-examples-and-tests" id="id9">Running examples and tests</a></p>
<ul>
<li><p><a class="reference internal" href="#running-the-examples" id="id10">Running the examples</a></p></li>
<li><p><a class="reference internal" href="#running-the-python-tests" id="id11">Running the Python tests</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#building-the-c-api-shared-library" id="id12">Building the C API shared library</a></p></li>
</ul>
</div>
<div class="section" id="installing-from-oneapi">
<h2>Installing from oneAPI<a class="headerlink" href="#installing-from-oneapi" title="Permalink to this headline">¶</a></h2>
<p>Dpctl is available as part of the oneAPI Intel Distribution of Python (IDP).
Please follow <a class="reference external" href="https://software.intel.com/content/www/us/en/develop/articles/installation-guide-for-intel-oneapi-toolkits.html">oneAPI installation guide</a> to install oneAPI. In this guide it
is assumed oneAPI is installed in the standard location and the environment
variable <code class="docutils literal notranslate"><span class="pre">ONEAPI_ROOT</span></code> points to the following installation root directory:</p>
<blockquote>
<div><ul class="simple">
<li><p>Windows: <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files</span> <span class="pre">(x86)\Intel\oneAPI\</span></code></p></li>
<li><p>Linux: <code class="docutils literal notranslate"><span class="pre">/opt/intel/oneapi</span></code></p></li>
</ul>
</div></blockquote>
<p>Once oneAPI is installed, dpctl is ready to be used by setting up the IDP that
is available inside oneAPI. IDP can be set up as follows:</p>
<p>On Linux</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> <span class="si">${</span><span class="nv">ONEAPI_ROOT</span><span class="si">}</span>/intelpython/latest/env/vars.sh
python -c <span class="s2">&quot;import dpctl; dpctl.lsplatform()&quot;</span>
</pre></div>
</div>
<p>On Windows</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> <span class="s2">&quot;</span><span class="nv">%ONEAPI_ROOT%</span><span class="s2">\intelpython\latest\env\vars.bat&quot;</span>
python -c <span class="s2">&quot;import dpctl; dpctl.lsplatform()&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">dpctl.lsplatform()</span></code> function is new in dpctl 0.7 and will be
available in oneAPI 2021.3. If you are following the guide on an older
oneAPI installation, use <code class="docutils literal notranslate"><span class="pre">dpctl.dump()</span></code>. If no GPU platforms are shown,
make source your system has a GPU and has the necessary GPU drivers. You can
install GPU drivers by following the <a class="reference external" href="https://dgpu-docs.intel.com/installation-guides/index.html">GPU driver installation guide</a>.</p>
</div>
</div>
<div class="section" id="install-wheel-package-from-pypi">
<h2>Install Wheel package from Pypi<a class="headerlink" href="#install-wheel-package-from-pypi" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Install dpctl</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pip install --index-url https://pypi.anaconda.org/intel/simple -extra-index-url https://pypi.org/simple dpctl
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dpctl wheel package is placed on Pypi, but some of its dependencies
(like Intel numpy) are available only in Anaconda Cloud. That is why install
command requires additional Intel Pypi channel from Anaconda Cloud.</p>
</div>
<ol class="arabic simple" start="2">
<li><p>Set path to Performance Libraries in case of using <code class="docutils literal notranslate"><span class="pre">venv</span></code> or system Python.</p></li>
</ol>
<p>On Linux</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>&lt;path_to_your_env&gt;/lib
</pre></div>
</div>
<p>On Windows</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">set</span> <span class="nv">PATH</span><span class="p">=&lt;</span>path_to_your_env<span class="p">&gt;</span>\bin;<span class="p">&lt;</span>path_to_your_env<span class="p">&gt;</span>\Library\bin;<span class="nv">%PATH%</span>
</pre></div>
</div>
</div>
<div class="section" id="building-from-source">
<h2>Building from source<a class="headerlink" href="#building-from-source" title="Permalink to this headline">¶</a></h2>
<p>To build dpctl from source, we need dpcpp and GPU drivers (and optionally CPU
OpenCL drivers). It is preferable to use the dpcpp compiler packaged as part of
oneAPI. However, it is possible to use a custom build of dpcpp and use that to
build dpctl, especially if you want to enable CUDA support.</p>
<div class="section" id="building-using-oneapi-dpcpp">
<h3>Building using oneAPI dpcpp<a class="headerlink" href="#building-using-oneapi-dpcpp" title="Permalink to this headline">¶</a></h3>
<p>As before, oneAPI and graphics drivers should be installed on the system prior
to proceeding further.</p>
<p><strong>Activate oneAPI as follows</strong></p>
<p>On Linux</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> <span class="si">${</span><span class="nv">ONEAPI_ROOT</span><span class="si">}</span>/setvars.sh
</pre></div>
</div>
<p>On Windows</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> <span class="s2">&quot;</span><span class="nv">%ONEAPI_ROOT%</span><span class="s2">\setvars.bat&quot;</span>
</pre></div>
</div>
<p><strong>Build and install using conda-build</strong></p>
<p>The conda-recipe included with the sources can be used to build the dpctl
package. The advantage of this approach is that all dependencies are pulled in
from oneAPI’s intelpython conda channel that was installed as part of oneAPI.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">ONEAPI_ROOT</span><span class="o">=</span>/opt/intel/oneapi
conda build conda-recipe -c <span class="si">${</span><span class="nv">ONEAPI_ROOT</span><span class="si">}</span>/conda_channel
</pre></div>
</div>
<p>On Windows to cope with <a class="reference external" href="https://github.com/IntelPython/dpctl/issues/15">long file names</a>,
use <code class="docutils literal notranslate"><span class="pre">croot</span></code> with short folder path:</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">set</span> <span class="s2">&quot;ONEAPI_ROOT=C:\Program Files (x86)\Intel\oneAPI\&quot;</span>
conda build --croot=C:/tmp conda-recipe -c <span class="s2">&quot;</span><span class="nv">%ONEAPI_ROOT%</span><span class="s2">\conda_channel&quot;</span>
</pre></div>
</div>
<p>After building the conda package you may install it by executing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install dpctl
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You could face issues with conda-build version 3.20. Use conda-build
3.18 instead.</p>
</div>
<p><strong>Build and Install with setuptools</strong></p>
<p>To build using Python <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>, the following packages should be
installed:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cython</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ninja</span></code> (only on Windows)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gtest</span></code> (optional to run C API tests)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> (optional to run Python API tests)</p></li>
</ul>
</div></blockquote>
<p>Once the prerequisites are installed, building using <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> involves The
usual steps</p>
<p>to build and install</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py install
</pre></div>
</div>
<p>, and to develop.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py develop
</pre></div>
</div>
</div>
<div class="section" id="building-using-custom-dpcpp">
<h3>Building using custom dpcpp<a class="headerlink" href="#building-using-custom-dpcpp" title="Permalink to this headline">¶</a></h3>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>Instructions coming soon.</p>
</div>
</div>
</div>
<div class="section" id="using-dpctl">
<h2>Using dpctl<a class="headerlink" href="#using-dpctl" title="Permalink to this headline">¶</a></h2>
<p>Dpctl requires a DPC++ runtime. When dpctl is installed via conda then it uses
the DPC++ runtime from <code class="docutils literal notranslate"><span class="pre">dpcpp_cpp_rt</span></code> package that is part of IDP. When using
<code class="docutils literal notranslate"><span class="pre">setuptools</span></code> make sure a compatible version of DPC++ runtime is available on
the system. The easiest way to setup a DPC++ runtime will be by activating
oneAPI.</p>
</div>
<div class="section" id="running-examples-and-tests">
<h2>Running examples and tests<a class="headerlink" href="#running-examples-and-tests" title="Permalink to this headline">¶</a></h2>
<div class="section" id="running-the-examples">
<h3>Running the examples<a class="headerlink" href="#running-the-examples" title="Permalink to this headline">¶</a></h3>
<p>After setting up dpctl you can try out the Python examples as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> script <span class="k">in</span> <span class="sb">`</span>ls examples/python/<span class="sb">`</span>
<span class="k">do</span>
<span class="nb">echo</span> <span class="s2">&quot;executing </span><span class="si">${</span><span class="nv">script</span><span class="si">}</span><span class="s2">&quot;</span>
python examples/python/<span class="si">${</span><span class="nv">script</span><span class="si">}</span>
<span class="k">done</span>
</pre></div>
</div>
<p>The dpctl repository also provides a set of examples of building Cython
extensions with DPC++ compiler, that interoperate with dpctl. These examples are
located under <em>examples/cython</em>. Each example in the folder can be built using
<code class="docutils literal notranslate"><span class="pre">CC=clang</span> <span class="pre">CXX=dpcpp</span> <span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">build_ext</span> <span class="pre">--inplace</span></code>. Please refer to
<code class="docutils literal notranslate"><span class="pre">run.py</span></code> script in respective folders to execute the Cython extension
examples.</p>
</div>
<div class="section" id="running-the-python-tests">
<h3>Running the Python tests<a class="headerlink" href="#running-the-python-tests" title="Permalink to this headline">¶</a></h3>
<p>The dpctl Python test suite can be executed as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --pyargs dpctl
</pre></div>
</div>
</div>
</div>
<div class="section" id="building-the-c-api-shared-library">
<h2>Building the C API shared library<a class="headerlink" href="#building-the-c-api-shared-library" title="Permalink to this headline">¶</a></h2>
<p>The dpctl C API is a shared library called libDPCTLSyclInterface and is built
together when build the Python package. However, it is possible to only build
the C API as a standalone library. To do so, you will need <code class="docutils literal notranslate"><span class="pre">cmake</span></code>,
<code class="docutils literal notranslate"><span class="pre">ninja</span></code> or <code class="docutils literal notranslate"><span class="pre">make</span></code>, and optionally <code class="docutils literal notranslate"><span class="pre">gtest</span> <span class="pre">1.10</span></code> if you wish to run the
C API test suite.</p>
<p>For example, on Linux the following script can be used to build the C oneAPI
library.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nb">set</span> +xe
rm -rf build
mkdir build
<span class="nb">pushd</span> build

<span class="nv">INSTALL_PREFIX</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/../install
rm -rf <span class="si">${</span><span class="nv">INSTALL_PREFIX</span><span class="si">}</span>
<span class="nb">export</span> <span class="nv">ONEAPI_ROOT</span><span class="o">=</span>/opt/intel/oneapi
<span class="nv">DPCPP_ROOT</span><span class="o">=</span><span class="si">${</span><span class="nv">ONEAPI_ROOT</span><span class="si">}</span>/compiler/latest/linux

cmake                                                       <span class="se">\</span>
    -DCMAKE_BUILD_TYPE<span class="o">=</span>Release                              <span class="se">\</span>
    -DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="si">${</span><span class="nv">INSTALL_PREFIX</span><span class="si">}</span>                <span class="se">\</span>
    -DCMAKE_PREFIX_PATH<span class="o">=</span><span class="si">${</span><span class="nv">INSTALL_PREFIX</span><span class="si">}</span>                   <span class="se">\</span>
    -DDPCPP_INSTALL_DIR<span class="o">=</span><span class="si">${</span><span class="nv">DPCPP_ROOT</span><span class="si">}</span>                       <span class="se">\</span>
    -DCMAKE_C_COMPILER:PATH<span class="o">=</span><span class="si">${</span><span class="nv">DPCPP_ROOT</span><span class="si">}</span>/bin/clang         <span class="se">\</span>
    -DCMAKE_CXX_COMPILER:PATH<span class="o">=</span><span class="si">${</span><span class="nv">DPCPP_ROOT</span><span class="si">}</span>/bin/dpcpp       <span class="se">\</span>
    -DDPCTL_ENABLE_LO_PROGRAM_CREATION<span class="o">=</span>ON                   <span class="se">\</span>
    -DDPCTL_BUILD_CAPI_TESTS<span class="o">=</span>ON                             <span class="se">\</span>
    ..

make <span class="nv">V</span><span class="o">=</span><span class="m">1</span> -n -j <span class="m">4</span> <span class="o">&amp;&amp;</span> make check <span class="o">&amp;&amp;</span> make install
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../dpctl_pyapi.html" class="btn btn-neutral float-right" title="dpctl Python API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../index.html" class="btn btn-neutral float-left" title="Welcome to Data-parallel Control (dpctl)’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Intel Corp.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Other versions</span>
      v: 0.7.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <dl>
        <dt>Versions</dt>
        
           <strong> 
          <dd><a href="https://intelpython.github.io/dpctl/0.7.0/index.html">0.7.0</a></dd>
           </strong> 
        
          
          <dd><a href="https://intelpython.github.io/dpctl/0.6.1/index.html">0.6.1</a></dd>
          
        
          
          <dd><a href="https://intelpython.github.io/dpctl/latest/index.html">latest</a></dd>
          
        
      </dl>
      
    </div>
  </div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>