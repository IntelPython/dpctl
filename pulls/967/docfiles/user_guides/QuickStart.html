<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quick Start Guide &mdash; Data-parallel Control (dpctl) 0.14.0dev1+2.g17e19d400 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/doxyrest-pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/doxyrest-sphinx_rtd_theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/target-highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="User Manual" href="UserManual.html" />
    <link rel="prev" title="Welcome to the Data-parallel Control (dpctl) Documentation!" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Data-parallel Control (dpctl)
          </a>
              <div class="version">
                0.14.0dev1+2.g17e19d400
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Start Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation-from-oneapi">Installation from oneAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-the-wheel-package-from-pypi">Install the Wheel Package from PyPi</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-from-the-source">Building from the Source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#building-using-oneapi-dpcpp">Building using oneAPI dpcpp</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#activate-oneapi">Activate oneAPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-and-install-using-conda-build">Build and Install Using Conda-Build</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-and-install-with-scikit-build">Build and Install with scikit-build</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#building-using-custom-dpcpp">Building Using Custom dpcpp</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-dpctl">Using dpctl</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-examples-and-tests">Running Examples and Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-examples">Running the Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-python-tests">Running the Python Tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-libsyclinterface-library">Building the libsyclinterface Library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="UserManual.html">User Manual</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dpctl/dpctl_pyapi.html">dpctl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libsyclinterface/index.html">libsyclinterface</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Data-parallel Control (dpctl)</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Quick Start Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/docfiles/user_guides/QuickStart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quick-start-guide">
<span id="id1"></span><h1>Quick Start Guide<a class="headerlink" href="#quick-start-guide" title="Permalink to this heading"></a></h1>
<section id="installation-from-oneapi">
<h2>Installation from oneAPI<a class="headerlink" href="#installation-from-oneapi" title="Permalink to this heading"></a></h2>
<p>Dpctl is available as part of the oneAPI Intel(R) Distribution for Python (IDP).
Refer to <a class="reference external" href="https://www.intel.com/content/www/us/en/developer/articles/guide/installation-guide-for-oneapi-toolkits.html">Intel(R) oneAPI Toolkits Installation Guide</a>
to install it.</p>
<p>In this topic, it is assumed that oneAPI is installed in the standard location and the
environment variable <code class="docutils literal notranslate"><span class="pre">ONEAPI_ROOT</span></code> points to the following installation root
directory:</p>
<blockquote>
<div><ul class="simple">
<li><p>Windows OS: <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files</span> <span class="pre">(x86)\Intel\oneAPI\</span></code></p></li>
<li><p>Linux OS: <code class="docutils literal notranslate"><span class="pre">/opt/intel/oneapi</span></code></p></li>
</ul>
</div></blockquote>
<p>Once oneAPI is installed, dpctl is ready to be used by setting up IDP from
the oneAPI installation. IDP can be set up as follows:</p>
<p>On Linux OS</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> <span class="si">${</span><span class="nv">ONEAPI_ROOT</span><span class="si">}</span>/intelpython/latest/env/vars.sh
python -c <span class="s2">&quot;import dpctl; dpctl.lsplatform()&quot;</span>
</pre></div>
</div>
<p>On Windows OS</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> <span class="s2">&quot;</span><span class="nv">%ONEAPI_ROOT%</span><span class="s2">\intelpython\latest\env\vars.bat&quot;</span>
python -c <span class="s2">&quot;import dpctl; dpctl.lsplatform()&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If no GPU platforms are shown, make sure your system has a supported
GPU and the necessary GPU drivers installed.
See <a class="reference external" href="https://dgpu-docs.intel.com/installation-guides/index.html">GPU driver installation guide</a> to install GPU drivers.</p>
</div>
</section>
<section id="install-the-wheel-package-from-pypi">
<h2>Install the Wheel Package from PyPi<a class="headerlink" href="#install-the-wheel-package-from-pypi" title="Permalink to this heading"></a></h2>
<p>To install dpctl from PyPi, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pip install --index-url https://pypi.anaconda.org/intel/simple dpctl
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The dpctl wheel package is available on PyPi, but some of the dependencies
(like Intel(R) numpy) are available only on Anaconda Cloud. For this reason,
install the extra packages needed by dpctl from the Intel(R) channel on
Anaconda cloud. You also need to set the <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>
or <code class="docutils literal notranslate"><span class="pre">PATH</span></code> correctly.</p>
</div>
<p>On Linux OS</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>&lt;path_to_your_env&gt;/lib
</pre></div>
</div>
<p>On Windows OS</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">set</span> <span class="nv">PATH</span><span class="p">=&lt;</span>path_to_your_env<span class="p">&gt;</span>\bin;<span class="p">&lt;</span>path_to_your_env<span class="p">&gt;</span>\Library\bin;<span class="nv">%PATH%</span>
</pre></div>
</div>
</section>
<section id="building-from-the-source">
<h2>Building from the Source<a class="headerlink" href="#building-from-the-source" title="Permalink to this heading"></a></h2>
<p>To build dpctl from the source, you need dpcpp and GPU drivers, and optionally CPU
OpenCL drivers. It is preferable to use the dpcpp compiler packaged as part of
oneAPI. However, it is possible to use a custom build of dpcpp to build dpctl,
especially if you want to enable CUDA support.</p>
<section id="building-using-oneapi-dpcpp">
<h3>Building using oneAPI dpcpp<a class="headerlink" href="#building-using-oneapi-dpcpp" title="Permalink to this heading"></a></h3>
<p>Install oneAPI and graphics drivers to the system prior
to proceeding further.</p>
<section id="activate-oneapi">
<h4>Activate oneAPI<a class="headerlink" href="#activate-oneapi" title="Permalink to this heading"></a></h4>
<p>On Linux OS</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> <span class="si">${</span><span class="nv">ONEAPI_ROOT</span><span class="si">}</span>/setvars.sh
</pre></div>
</div>
<p>On Windows OS</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> <span class="s2">&quot;</span><span class="nv">%ONEAPI_ROOT%</span><span class="s2">\setvars.bat&quot;</span>
</pre></div>
</div>
</section>
<section id="build-and-install-using-conda-build">
<h4>Build and Install Using Conda-Build<a class="headerlink" href="#build-and-install-using-conda-build" title="Permalink to this heading"></a></h4>
<p>You can use the conda-recipe included with the sources to build the dpctl
package. The advantage of this approach is that all dependencies are pulled in
from oneAPI’s intelpython conda channel that is installed as a part of oneAPI.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">ONEAPI_ROOT</span><span class="o">=</span>/opt/intel/oneapi
conda build conda-recipe -c <span class="si">${</span><span class="nv">ONEAPI_ROOT</span><span class="si">}</span>/conda_channel
</pre></div>
</div>
<p>On Windows OS to cope with <a class="reference external" href="https://github.com/IntelPython/dpctl/issues/15">long file names</a>,
use <code class="docutils literal notranslate"><span class="pre">croot</span></code> with a short folder path:</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">set</span> <span class="s2">&quot;ONEAPI_ROOT=C:\Program Files (x86)\Intel\oneAPI\&quot;</span>
conda build --croot=C:/tmp conda-recipe -c <span class="s2">&quot;</span><span class="nv">%ONEAPI_ROOT%</span><span class="s2">\conda_channel&quot;</span>
</pre></div>
</div>
<p>After building the Conda package, install it by executing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install dpctl
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can face issues with conda-build version 3.20. Use conda-build
3.18 instead.</p>
</div>
</section>
<section id="build-and-install-with-scikit-build">
<h4>Build and Install with scikit-build<a class="headerlink" href="#build-and-install-with-scikit-build" title="Permalink to this heading"></a></h4>
<p>To build using Python <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> and <code class="docutils literal notranslate"><span class="pre">scikit-build</span></code>, install the following Python packages:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cython</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scikit-build</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ninja</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gtest</span></code> (optional to run C API tests)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gmock</span></code> (optional to run C API tests)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> (optional to run Python API tests)</p></li>
</ul>
</div></blockquote>
<p>Once the prerequisites are installed, building using <code class="docutils literal notranslate"><span class="pre">scikit-build</span></code> involves the usual steps.</p>
<p>To build and install, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py install -- -G Ninja -DCMAKE_C_COMPILER:PATH<span class="o">=</span>icx -DCMAKE_CXX_COMPILER:PATH<span class="o">=</span>icpx
</pre></div>
</div>
<p>To develop, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py develop -G Ninja -DCMAKE_C_COMPILER:PATH<span class="o">=</span>icx -DCMAKE_CXX_COMPILER:PATH<span class="o">=</span>icpx
</pre></div>
</div>
<p>On Windows OS, use <code class="docutils literal notranslate"><span class="pre">icx</span></code> for both C and CXX compilers.</p>
<p>To develop on Linux OS, use the driver script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python scripts/build_locally.py
</pre></div>
</div>
</section>
</section>
<section id="building-using-custom-dpcpp">
<h3>Building Using Custom dpcpp<a class="headerlink" href="#building-using-custom-dpcpp" title="Permalink to this heading"></a></h3>
<p>You can build dpctl from the source using the <a class="reference external" href="https://github.com/intel/llvm/blob/sycl/sycl/doc/GetStartedGuide.md">DPC++ toolchain</a>
instead of the DPC++ compiler that comes with oneAPI.</p>
<p>Do this, to enable support for CUDA devices.</p>
<p>Following steps in the <a class="reference internal" href="#build-and-install-with-scikit-build">Build and install with scikit-build</a> use a command-line option to set
the relevant CMake variables, for example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py develop -- -G Ninja -DCMAKE_C_COMPILER:PATH<span class="o">=</span><span class="k">$(</span>which clang<span class="k">)</span> -DCMAKE_CXX_COMPILER:PATH<span class="o">=</span><span class="k">$(</span>which clang++<span class="k">)</span>
</pre></div>
</div>
<p>Or you can use the driver script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python scripts/build_locally.py --c-compiler<span class="o">=</span><span class="k">$(</span>which clang<span class="k">)</span> --cxx-compiler<span class="o">=</span><span class="k">$(</span>which clang++<span class="k">)</span>
</pre></div>
</div>
<p>You can retrieve available options and their descriptions using the option
<code class="code docutils literal notranslate"><span class="pre">--help</span></code>.</p>
</section>
</section>
<section id="using-dpctl">
<h2>Using dpctl<a class="headerlink" href="#using-dpctl" title="Permalink to this heading"></a></h2>
<p>Dpctl requires a DPC++ runtime. When dpctl is installed via Conda it uses
the DPC++ runtime from the <code class="docutils literal notranslate"><span class="pre">dpcpp_cpp_rt</span></code> package that is a part of IDP. When using
<code class="docutils literal notranslate"><span class="pre">setuptools</span></code> make sure a compatible version of DPC++ runtime is available on
the system. The easiest way to set up a DPC++ runtime is by activating
oneAPI.</p>
</section>
<section id="running-examples-and-tests">
<h2>Running Examples and Tests<a class="headerlink" href="#running-examples-and-tests" title="Permalink to this heading"></a></h2>
<section id="running-the-examples">
<h3>Running the Examples<a class="headerlink" href="#running-the-examples" title="Permalink to this heading"></a></h3>
<p>After setting up dpctl, you can test the Python examples as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> script <span class="k">in</span> <span class="sb">`</span>ls examples/python/<span class="sb">`</span>
<span class="k">do</span>
<span class="nb">echo</span> <span class="s2">&quot;executing </span><span class="si">${</span><span class="nv">script</span><span class="si">}</span><span class="s2">&quot;</span>
python examples/python/<span class="si">${</span><span class="nv">script</span><span class="si">}</span>
<span class="k">done</span>
</pre></div>
</div>
<p>The dpctl repository also provides a set of <a class="reference external" href="https://github.com/IntelPython/dpctl/tree/master/examples/cython">examples</a>
of building the Cython extensions with the DPC++ compiler, that interoperates with dpctl.</p>
<p>To build each example, use
<code class="docutils literal notranslate"><span class="pre">CC=icx</span> <span class="pre">CXX=dpcpp</span> <span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">build_ext</span> <span class="pre">--inplace</span></code>.
Refer to the <code class="docutils literal notranslate"><span class="pre">run.py</span></code> script in respective folders to execute the Cython extension
examples.</p>
</section>
<section id="running-the-python-tests">
<h3>Running the Python Tests<a class="headerlink" href="#running-the-python-tests" title="Permalink to this heading"></a></h3>
<p>You can execute the dpctl Python test suite as follow:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --pyargs dpctl
</pre></div>
</div>
</section>
</section>
<section id="building-the-libsyclinterface-library">
<h2>Building the libsyclinterface Library<a class="headerlink" href="#building-the-libsyclinterface-library" title="Permalink to this heading"></a></h2>
<p>The libsyclinterface is a shared library used by the Python package.
To build the library, you need:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DPC++</span></code> toolchain</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ninja</span></code> or <code class="docutils literal notranslate"><span class="pre">make</span></code></p></li>
<li><p>Optionally <code class="docutils literal notranslate"><span class="pre">gtest</span> <span class="pre">1.10</span></code> if you want to run the test suite</p></li>
</ul>
<p>For example, on Linux OS the following script can be used to build the C oneAPI
library.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nb">set</span> +xe
rm -rf build
mkdir build
<span class="nb">pushd</span> build

<span class="nv">INSTALL_PREFIX</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/../install
rm -rf <span class="si">${</span><span class="nv">INSTALL_PREFIX</span><span class="si">}</span>
<span class="nb">export</span> <span class="nv">ONEAPI_ROOT</span><span class="o">=</span>/opt/intel/oneapi
<span class="nv">DPCPP_ROOT</span><span class="o">=</span><span class="si">${</span><span class="nv">ONEAPI_ROOT</span><span class="si">}</span>/compiler/latest/linux

cmake                                                       <span class="se">\</span>
    -DCMAKE_BUILD_TYPE<span class="o">=</span>Release                              <span class="se">\</span>
    -DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="si">${</span><span class="nv">INSTALL_PREFIX</span><span class="si">}</span>                <span class="se">\</span>
    -DCMAKE_PREFIX_PATH<span class="o">=</span><span class="si">${</span><span class="nv">INSTALL_PREFIX</span><span class="si">}</span>                   <span class="se">\</span>
    -DDPCPP_INSTALL_DIR<span class="o">=</span><span class="si">${</span><span class="nv">DPCPP_ROOT</span><span class="si">}</span>                       <span class="se">\</span>
    -DCMAKE_C_COMPILER:PATH<span class="o">=</span><span class="si">${</span><span class="nv">DPCPP_ROOT</span><span class="si">}</span>/bin/icx           <span class="se">\</span>
    -DCMAKE_CXX_COMPILER:PATH<span class="o">=</span><span class="si">${</span><span class="nv">DPCPP_ROOT</span><span class="si">}</span>/bin/dpcpp       <span class="se">\</span>
    -DDPCTL_BUILD_CAPI_TESTS<span class="o">=</span>ON                             <span class="se">\</span>
    ..

make <span class="nv">V</span><span class="o">=</span><span class="m">1</span> -n -j <span class="m">4</span> <span class="o">&amp;&amp;</span> make check <span class="o">&amp;&amp;</span> make install
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../index.html" class="btn btn-neutral float-left" title="Welcome to the Data-parallel Control (dpctl) Documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="UserManual.html" class="btn btn-neutral float-right" title="User Manual" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-21, Intel Corp..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>