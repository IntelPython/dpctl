<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quick Start Guide &mdash; Data-parallel Control (dpctl) 0.12.0dev1+120.g487e15d6 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/doxyrest-pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/doxyrest-sphinx_rtd_theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/target-highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="User Manual" href="UserManual.html" />
    <link rel="prev" title="Welcome to Data-parallel Control (dpctl)’s documentation!" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Data-parallel Control (dpctl)
          </a>
              <div class="version">
                0.12.0dev1+120.g487e15d6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Start Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing-from-oneapi">Installing from oneAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-wheel-package-from-pypi">Install Wheel package from Pypi</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-from-source">Building from source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#building-using-oneapi-dpcpp">Building using oneAPI dpcpp</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#activate-oneapi-as-follows">Activate oneAPI as follows</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-and-install-using-conda-build">Build and install using conda-build</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-and-install-with-setuptools">Build and install with setuptools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#building-using-custom-dpcpp">Building using custom dpcpp</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-dpctl">Using dpctl</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-examples-and-tests">Running examples and tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-examples">Running the examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-python-tests">Running the Python tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-dpctlsyclinterface-library">Building the DPCTLSyclInterface library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="UserManual.html">User Manual</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dpctl/dpctl_pyapi.html">dpctl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libsyclinterface/index.html">libsyclinterface</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Data-parallel Control (dpctl)</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Quick Start Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/docfiles/user_guides/QuickStart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quick-start-guide">
<span id="id1"></span><h1>Quick Start Guide<a class="headerlink" href="#quick-start-guide" title="Permalink to this headline"></a></h1>
<section id="installing-from-oneapi">
<h2>Installing from oneAPI<a class="headerlink" href="#installing-from-oneapi" title="Permalink to this headline"></a></h2>
<p>Dpctl is available as part of the oneAPI Intel Distribution of Python (IDP).
Please follow <a class="reference external" href="https://software.intel.com/content/www/us/en/develop/articles/installation-guide-for-intel-oneapi-toolkits.html">oneAPI installation guide</a> to install oneAPI. In this quick
start guide, it is assumed oneAPI is installed in the standard location and the
environment variable <code class="docutils literal notranslate"><span class="pre">ONEAPI_ROOT</span></code> points to the following installation root
directory:</p>
<blockquote>
<div><ul class="simple">
<li><p>Windows: <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files</span> <span class="pre">(x86)\Intel\oneAPI\</span></code></p></li>
<li><p>Linux: <code class="docutils literal notranslate"><span class="pre">/opt/intel/oneapi</span></code></p></li>
</ul>
</div></blockquote>
<p>Once oneAPI is installed, dpctl is ready to be used by setting up IDP from
the oneAPI installation. IDP can be set up as follows:</p>
<p>On Linux</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> <span class="si">${</span><span class="nv">ONEAPI_ROOT</span><span class="si">}</span>/intelpython/latest/env/vars.sh
python -c <span class="s2">&quot;import dpctl; dpctl.lsplatform()&quot;</span>
</pre></div>
</div>
<p>On Windows</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> <span class="s2">&quot;</span><span class="nv">%ONEAPI_ROOT%</span><span class="s2">\intelpython\latest\env\vars.bat&quot;</span>
python -c <span class="s2">&quot;import dpctl; dpctl.lsplatform()&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">dpctl.lsplatform()</span></code> function is new in dpctl 0.7 and will be
available in oneAPI 2021.3. If you are following the guide on an older
oneAPI installation, use <code class="docutils literal notranslate"><span class="pre">dpctl.dump()</span></code>. If no GPU platforms are shown,
make sure your system has a supported GPU and has the necessary GPU drivers
installed. You can install GPU drivers by following the
<a class="reference external" href="https://dgpu-docs.intel.com/installation-guides/index.html">GPU driver installation guide</a>.</p>
</div>
</section>
<section id="install-wheel-package-from-pypi">
<h2>Install Wheel package from Pypi<a class="headerlink" href="#install-wheel-package-from-pypi" title="Permalink to this headline"></a></h2>
<p>Dpctl can also be istalled from Pypi.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pip install --index-url https://pypi.anaconda.org/intel/simple --extra-index-url https://pypi.org/simple dpctl
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The dpctl wheel package is available on Pypi, but some of the dependencies
(like Intel numpy) are available only in Anaconda Cloud. For this reason,
please install the extra packages needed by dpctl from the Intel channel in
Anaconda cloud. Additionally, you will need to set the <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>
or <code class="docutils literal notranslate"><span class="pre">PATH</span></code> correctly.</p>
</div>
<p>On Linux</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>&lt;path_to_your_env&gt;/lib
</pre></div>
</div>
<p>On Windows</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">set</span> <span class="nv">PATH</span><span class="p">=&lt;</span>path_to_your_env<span class="p">&gt;</span>\bin;<span class="p">&lt;</span>path_to_your_env<span class="p">&gt;</span>\Library\bin;<span class="nv">%PATH%</span>
</pre></div>
</div>
</section>
<section id="building-from-source">
<h2>Building from source<a class="headerlink" href="#building-from-source" title="Permalink to this headline"></a></h2>
<p>To build dpctl from source, we need dpcpp and GPU drivers (and optionally CPU
OpenCL drivers). It is preferable to use the dpcpp compiler packaged as part of
oneAPI. However, it is possible to use a custom build of dpcpp to build dpctl,
especially if you want to enable CUDA support.</p>
<section id="building-using-oneapi-dpcpp">
<h3>Building using oneAPI dpcpp<a class="headerlink" href="#building-using-oneapi-dpcpp" title="Permalink to this headline"></a></h3>
<p>As before, oneAPI and graphics drivers should be installed on the system prior
to proceeding further.</p>
<section id="activate-oneapi-as-follows">
<h4>Activate oneAPI as follows<a class="headerlink" href="#activate-oneapi-as-follows" title="Permalink to this headline"></a></h4>
<p>On Linux</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> <span class="si">${</span><span class="nv">ONEAPI_ROOT</span><span class="si">}</span>/setvars.sh
</pre></div>
</div>
<p>On Windows</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">call</span> <span class="s2">&quot;</span><span class="nv">%ONEAPI_ROOT%</span><span class="s2">\setvars.bat&quot;</span>
</pre></div>
</div>
</section>
<section id="build-and-install-using-conda-build">
<h4>Build and install using conda-build<a class="headerlink" href="#build-and-install-using-conda-build" title="Permalink to this headline"></a></h4>
<p>The conda-recipe included with the sources can be used to build the dpctl
package. The advantage of this approach is that all dependencies are pulled in
from oneAPI’s intelpython conda channel that was installed as part of oneAPI.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">ONEAPI_ROOT</span><span class="o">=</span>/opt/intel/oneapi
conda build conda-recipe -c <span class="si">${</span><span class="nv">ONEAPI_ROOT</span><span class="si">}</span>/conda_channel
</pre></div>
</div>
<p>On Windows to cope with <a class="reference external" href="https://github.com/IntelPython/dpctl/issues/15">long file names</a>,
use <code class="docutils literal notranslate"><span class="pre">croot</span></code> with short folder path:</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">set</span> <span class="s2">&quot;ONEAPI_ROOT=C:\Program Files (x86)\Intel\oneAPI\&quot;</span>
conda build --croot=C:/tmp conda-recipe -c <span class="s2">&quot;</span><span class="nv">%ONEAPI_ROOT%</span><span class="s2">\conda_channel&quot;</span>
</pre></div>
</div>
<p>After building the conda package you may install it by executing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install dpctl
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You could face issues with conda-build version 3.20. Use conda-build
3.18 instead.</p>
</div>
</section>
<section id="build-and-install-with-setuptools">
<h4>Build and install with setuptools<a class="headerlink" href="#build-and-install-with-setuptools" title="Permalink to this headline"></a></h4>
<p>To build using Python <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>, the following packages should be
installed:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cython</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ninja</span></code> (only on Windows)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gtest</span></code> (optional to run C API tests)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> (optional to run Python API tests)</p></li>
</ul>
</div></blockquote>
<p>Once the prerequisites are installed, building using <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> involves The
usual steps</p>
<p>to build and install</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py install
</pre></div>
</div>
<p>, and to develop.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py develop
</pre></div>
</div>
</section>
</section>
<section id="building-using-custom-dpcpp">
<h3>Building using custom dpcpp<a class="headerlink" href="#building-using-custom-dpcpp" title="Permalink to this headline"></a></h3>
<p>It is possible to build dpctl from source using .. _DPC++ toolchain: <a class="reference external" href="https://github.com/intel/llvm/blob/sycl/sycl/doc/GetStartedGuide.md">https://github.com/intel/llvm/blob/sycl/sycl/doc/GetStartedGuide.md</a>
instead of the DPC++ compiler that comes with oneAPI. One reason for doing this
may be to enable support for CUDA devices.</p>
<p>Following steps in <a class="reference internal" href="#build-and-install-with-setuptools">Build and install with setuptools</a> use command line
option <code class="code docutils literal notranslate"><span class="pre">--sycl-compiler-prefix</span></code>, for example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py develop --sycl-compiler-prefix<span class="o">=</span><span class="si">${</span><span class="nv">DPCPP_ROOT</span><span class="si">}</span>/llvm/build
</pre></div>
</div>
<p>Available options and their descriptions can be retrieved using option
<code class="code docutils literal notranslate"><span class="pre">--help</span></code>.</p>
</section>
</section>
<section id="using-dpctl">
<h2>Using dpctl<a class="headerlink" href="#using-dpctl" title="Permalink to this headline"></a></h2>
<p>Dpctl requires a DPC++ runtime. When dpctl is installed via conda then it uses
the DPC++ runtime from <code class="docutils literal notranslate"><span class="pre">dpcpp_cpp_rt</span></code> package that is part of IDP. When using
<code class="docutils literal notranslate"><span class="pre">setuptools</span></code> make sure a compatible version of DPC++ runtime is available on
the system. The easiest way to setup a DPC++ runtime will be by activating
oneAPI.</p>
</section>
<section id="running-examples-and-tests">
<h2>Running examples and tests<a class="headerlink" href="#running-examples-and-tests" title="Permalink to this headline"></a></h2>
<section id="running-the-examples">
<h3>Running the examples<a class="headerlink" href="#running-the-examples" title="Permalink to this headline"></a></h3>
<p>After setting up dpctl you can try out the Python examples as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> script <span class="k">in</span> <span class="sb">`</span>ls examples/python/<span class="sb">`</span>
<span class="k">do</span>
<span class="nb">echo</span> <span class="s2">&quot;executing </span><span class="si">${</span><span class="nv">script</span><span class="si">}</span><span class="s2">&quot;</span>
python examples/python/<span class="si">${</span><span class="nv">script</span><span class="si">}</span>
<span class="k">done</span>
</pre></div>
</div>
<p>The dpctl repository also provides a set of examples of building Cython
extensions with DPC++ compiler, that interoperate with dpctl. These examples are
located under <em>examples/cython</em>. Each example in the folder can be built using
<code class="docutils literal notranslate"><span class="pre">CC=icx</span> <span class="pre">CXX=dpcpp</span> <span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">build_ext</span> <span class="pre">--inplace</span></code>. Please refer to
<code class="docutils literal notranslate"><span class="pre">run.py</span></code> script in respective folders to execute the Cython extension
examples.</p>
</section>
<section id="running-the-python-tests">
<h3>Running the Python tests<a class="headerlink" href="#running-the-python-tests" title="Permalink to this headline"></a></h3>
<p>The dpctl Python test suite can be executed as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --pyargs dpctl
</pre></div>
</div>
</section>
</section>
<section id="building-the-dpctlsyclinterface-library">
<h2>Building the DPCTLSyclInterface library<a class="headerlink" href="#building-the-dpctlsyclinterface-library" title="Permalink to this headline"></a></h2>
<p>The libDPCTLSyclInterface is a shared library used by the Python package.
To build the library you will need <code class="docutils literal notranslate"><span class="pre">DPC++</span></code> toolchain, <code class="docutils literal notranslate"><span class="pre">cmake</span></code>,
<code class="docutils literal notranslate"><span class="pre">ninja</span></code> or <code class="docutils literal notranslate"><span class="pre">make</span></code>, and optionally <code class="docutils literal notranslate"><span class="pre">gtest</span> <span class="pre">1.10</span></code> if you wish to run the
test suite.</p>
<p>For example, on Linux the following script can be used to build the C oneAPI
library.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nb">set</span> +xe
rm -rf build
mkdir build
<span class="nb">pushd</span> build

<span class="nv">INSTALL_PREFIX</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/../install
rm -rf <span class="si">${</span><span class="nv">INSTALL_PREFIX</span><span class="si">}</span>
<span class="nb">export</span> <span class="nv">ONEAPI_ROOT</span><span class="o">=</span>/opt/intel/oneapi
<span class="nv">DPCPP_ROOT</span><span class="o">=</span><span class="si">${</span><span class="nv">ONEAPI_ROOT</span><span class="si">}</span>/compiler/latest/linux

cmake                                                       <span class="se">\</span>
    -DCMAKE_BUILD_TYPE<span class="o">=</span>Release                              <span class="se">\</span>
    -DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="si">${</span><span class="nv">INSTALL_PREFIX</span><span class="si">}</span>                <span class="se">\</span>
    -DCMAKE_PREFIX_PATH<span class="o">=</span><span class="si">${</span><span class="nv">INSTALL_PREFIX</span><span class="si">}</span>                   <span class="se">\</span>
    -DDPCPP_INSTALL_DIR<span class="o">=</span><span class="si">${</span><span class="nv">DPCPP_ROOT</span><span class="si">}</span>                       <span class="se">\</span>
    -DCMAKE_C_COMPILER:PATH<span class="o">=</span><span class="si">${</span><span class="nv">DPCPP_ROOT</span><span class="si">}</span>/bin/icx           <span class="se">\</span>
    -DCMAKE_CXX_COMPILER:PATH<span class="o">=</span><span class="si">${</span><span class="nv">DPCPP_ROOT</span><span class="si">}</span>/bin/dpcpp       <span class="se">\</span>
    -DDPCTL_ENABLE_LO_PROGRAM_CREATION<span class="o">=</span>ON                   <span class="se">\</span>
    -DDPCTL_BUILD_CAPI_TESTS<span class="o">=</span>ON                             <span class="se">\</span>
    ..

make <span class="nv">V</span><span class="o">=</span><span class="m">1</span> -n -j <span class="m">4</span> <span class="o">&amp;&amp;</span> make check <span class="o">&amp;&amp;</span> make install
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../index.html" class="btn btn-neutral float-left" title="Welcome to Data-parallel Control (dpctl)’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="UserManual.html" class="btn btn-neutral float-right" title="User Manual" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-21, Intel Corp..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Other versions</span>
      v: 0.12.0dev1+120.g487e15d6
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <dl>
        <dt>Versions</dt>
        
          
          <dd><a href="https://intelpython.github.io/dpctl/0.8.0/index.html">0.8.0</a></dd>
          
        
          
          <dd><a href="https://intelpython.github.io/dpctl/0.7.0/index.html">0.7.0</a></dd>
          
        
          
          <dd><a href="https://intelpython.github.io/dpctl/0.6.1/index.html">0.6.1</a></dd>
          
        
          
          <dd><a href="https://intelpython.github.io/dpctl/latest/index.html">latest</a></dd>
          
        
      </dl>
      
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>